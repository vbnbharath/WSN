<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>Stikine: SPI_Library.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Stikine
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_s_p_i___library_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">SPI_Library.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Setup and control library for the SPI link to the CC110l.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;msp430.h&gt;</code><br />
<code>#include &quot;<a class="el" href="_c_c110l_8h_source.html">CC110l.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_s_p_i___pins_8h_source.html">SPI_Pins.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_s_p_i___library_8h_source.html">SPI_Library.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a292196e767158c66f03cbcc244fc802b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_p_i___library_8c.html#a292196e767158c66f03cbcc244fc802b">SPI_Init</a> (void)</td></tr>
<tr class="memdesc:a292196e767158c66f03cbcc244fc802b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialization function for the SPI link.  <a href="#a292196e767158c66f03cbcc244fc802b">More...</a><br /></td></tr>
<tr class="separator:a292196e767158c66f03cbcc244fc802b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabf72034a6f247cd08d8bfc651129e93"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_p_i___library_8c.html#aabf72034a6f247cd08d8bfc651129e93">SPI_Send</a> (uint8_t address, uint8_t value)</td></tr>
<tr class="memdesc:aabf72034a6f247cd08d8bfc651129e93"><td class="mdescLeft">&#160;</td><td class="mdescRight">A function for sending a single byte to the radio.  <a href="#aabf72034a6f247cd08d8bfc651129e93">More...</a><br /></td></tr>
<tr class="separator:aabf72034a6f247cd08d8bfc651129e93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f5dae77a438cc14d2286590b1768811"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_p_i___library_8c.html#a1f5dae77a438cc14d2286590b1768811">SPI_Read</a> (uint8_t address, uint8_t *out)</td></tr>
<tr class="memdesc:a1f5dae77a438cc14d2286590b1768811"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads a single register.  <a href="#a1f5dae77a438cc14d2286590b1768811">More...</a><br /></td></tr>
<tr class="separator:a1f5dae77a438cc14d2286590b1768811"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f7eca85804b4c8cde6314b5562d52c4"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_p_i___library_8c.html#a1f7eca85804b4c8cde6314b5562d52c4">SPI_Send_Burst</a> (uint8_t address, uint8_t *value, uint8_t length)</td></tr>
<tr class="memdesc:a1f7eca85804b4c8cde6314b5562d52c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Makes a burst write into a set of registers, beginning with the register pointed by the address value.  <a href="#a1f7eca85804b4c8cde6314b5562d52c4">More...</a><br /></td></tr>
<tr class="separator:a1f7eca85804b4c8cde6314b5562d52c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8811cc7044570e78a7d29671a6b670ba"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_p_i___library_8c.html#a8811cc7044570e78a7d29671a6b670ba">SPI_Read_Burst</a> (uint8_t address, uint8_t *out, uint8_t length)</td></tr>
<tr class="memdesc:a8811cc7044570e78a7d29671a6b670ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Makes a burst read of the registers in the CC110l.  <a href="#a8811cc7044570e78a7d29671a6b670ba">More...</a><br /></td></tr>
<tr class="separator:a8811cc7044570e78a7d29671a6b670ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac25bdf7cadc2429611e0aa1bb416e8be"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_p_i___library_8c.html#ac25bdf7cadc2429611e0aa1bb416e8be">SPI_Strobe</a> (uint8_t strobe, uint8_t FIFO)</td></tr>
<tr class="memdesc:ac25bdf7cadc2429611e0aa1bb416e8be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a strobe command to the CC110l.  <a href="#ac25bdf7cadc2429611e0aa1bb416e8be">More...</a><br /></td></tr>
<tr class="separator:ac25bdf7cadc2429611e0aa1bb416e8be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a030f83b4c2ce4a1ce824e4174c888ab8"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_p_i___library_8c.html#a030f83b4c2ce4a1ce824e4174c888ab8">SPI_Read_Status</a> (uint8_t status_reg, uint8_t *out)</td></tr>
<tr class="memdesc:a030f83b4c2ce4a1ce824e4174c888ab8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads a value from one of the special status registers in the CC110l.  <a href="#a030f83b4c2ce4a1ce824e4174c888ab8">More...</a><br /></td></tr>
<tr class="separator:a030f83b4c2ce4a1ce824e4174c888ab8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Setup and control library for the SPI link to the CC110l. </p>
<p>Ports and pins for this library are defined in <a class="el" href="_s_p_i___library_8h.html" title="Library for communicating with CC110l over SPI. ">SPI_Library.h</a>, there are ifdef blocks to target different controllers. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a292196e767158c66f03cbcc244fc802b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SPI_Init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialization function for the SPI link. </p>
<p>Uses the Port/Pin mapping values in <a class="el" href="_s_p_i___pins_8h.html">SPI_Pins.h</a> to configure the necessary registers for SPI communication with the CC110l. These mappings are device specific and would need to be changed depending on which MSP430 is being targetted, and which USCI module is being used. The preferred method of handling multiple boards is to use #ifdef blocks targetted at the define value used with the MSP430.h file. </p>

</div>
</div>
<a class="anchor" id="a1f5dae77a438cc14d2286590b1768811"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t SPI_Read </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads a single register. </p>
<p>Fetches the value stored in the specified register. Returns the status byte and copies the register value into the out parameter</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">address</td><td>The register to be read. </td></tr>
    <tr><td class="paramname">out</td><td>Pointer to write the stored register value into. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status byte from the CC110l, for a read operation the 4 LSB of the byte represent the new data in the RX FIFO. </dd></dl>

</div>
</div>
<a class="anchor" id="a8811cc7044570e78a7d29671a6b670ba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t SPI_Read_Burst </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Makes a burst read of the registers in the CC110l. </p>
<p>A succession of registers in the CC110l will be copied into the array. The register value at the provided address will be written into the first position of the array, the next register into the second position in the array, and so on.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">address</td><td>The beginning register address. </td></tr>
    <tr><td class="paramname">out</td><td>Pointer to the array the register values are going to be written into. </td></tr>
    <tr><td class="paramname">length</td><td>The number of elements to read. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The CC110l status byte </dd></dl>

</div>
</div>
<a class="anchor" id="a030f83b4c2ce4a1ce824e4174c888ab8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t SPI_Read_Status </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>status_reg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads a value from one of the special status registers in the CC110l. </p>
<p>The CC110l has a set of special read only status registers. They contain information such as the version number of the chip, the current state machine state, and the FIFO buffer levels.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">status_reg</td><td>The status register to read the value from. </td></tr>
    <tr><td class="paramname">out</td><td>A pointer to the value that the status register should be written into. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The CC110l status byte. </dd></dl>

</div>
</div>
<a class="anchor" id="aabf72034a6f247cd08d8bfc651129e93"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t SPI_Send </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A function for sending a single byte to the radio. </p>
<p>Writes a byte to the specified register.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">address</td><td>The register in the CC110l that the byte is to be written to. </td></tr>
    <tr><td class="paramname">value</td><td>The value to write to the target register. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status byte from the CC110l. For a write operation the 4 LSB of the byte will represent the space left in the TX_FIFO. </dd></dl>

</div>
</div>
<a class="anchor" id="a1f7eca85804b4c8cde6314b5562d52c4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t SPI_Send_Burst </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Makes a burst write into a set of registers, beginning with the register pointed by the address value. </p>
<p>The first value in the input array is written into the register at address. The second value is written into the next register, and so on. The status byte is captured from the transmission of the final byte in the burst, and will represent the space left in the TX FIFO just before the final byte is transmitted.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">address</td><td>The address for the first register to write. </td></tr>
    <tr><td class="paramname">value</td><td>An array of values to write into CC110l registers. </td></tr>
    <tr><td class="paramname">length</td><td>The number of values that are going to be written to the CC110l. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status byte of the CC110l </dd></dl>

</div>
</div>
<a class="anchor" id="ac25bdf7cadc2429611e0aa1bb416e8be"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t SPI_Strobe </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>strobe</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>FIFO</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends a strobe command to the CC110l. </p>
<p>The operation of the CC110l is a basic state machine. It will move between states based on either internal events or through strobe commands which are passed to it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">strobe</td><td>One of the strobe commands from <a class="el" href="_c_c110l_8h.html" title="Contains definitions for the registers, strobes, and bit masks for the CC110l. ">CC110l.h</a> </td></tr>
    <tr><td class="paramname">FIFO</td><td>Get_TX_FIFO or Get_RX_FIFO </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The CC110l status byte </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_74389ed8173ad57b461b9d623a1f3867.html">Source</a></li><li class="navelem"><a class="el" href="dir_a68ce9f702b01e936f36b0bc23d4b891.html">Stikine</a></li><li class="navelem"><a class="el" href="_s_p_i___library_8c.html">SPI_Library.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
